window.__require=function t(e,n,a){function o(s,r){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!r&&d)return d(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,n,a)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<a.length;s++)o(a[s]);return o}({addFood:[function(t,e,n){"use strict";cc._RF.push(e,"d8a43WZeZROkKOS/mTprWvv","addFood");var a=t("common");cc.Class({extends:cc.Component,properties:{presentStrand:{default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.mouseStart,this)},start:function(){},mouseStart:function(t){this.presentStrand=cc.find("Canvas").getChildByName("Main Camera").getChildByName("presentStrand");for(var e=t.target.name,n="",o=0;o<e.length-1;o++)n+=e[o];var i=a.data,s=i.presentSize+i.foods[n];s<=i.maxSize&&(this.createSingleFood(n),i.strand[i.strand.length]=n,i.presentSize=s)},createSingleFood:function(t){var e=this;cc.loader.loadRes(t,cc.SpriteFrame,function(n,o){var i=new cc.Node;i.parent=e.presentStrand,i.addComponent(cc.Sprite).spriteFrame=o,i.name=t,i.scale=.5,i.x=e.node.x,i.y=e.node.y,e.presentStrand.width=e.presentStrand.width<i.width?i.width:e.presentStrand.width;cc.view.getFrameSize();var s=-e.node.x;if(6==a.data.foods[t])var r=-220;else r=100-e.node.y-i.height/2-35*(6-a.data.presentSize-a.data.foods[t]);var c=cc.spawn(cc.moveBy(.5,s,r),cc.scaleTo(.5,1,1)).easing(cc.easeCubicActionOut());i.runAction(c)})}}),cc._RF.pop()},{common:"common"}],all:[function(t,e,n){"use strict";cc._RF.push(e,"7138cbas9pCR67b4jxuefpv","all"),cc.Class({extends:cc.Component,properties:{isSelect:!1,paprika:{default:null,type:cc.Node},cuminPowder:{default:null,type:cc.Node},oil:{default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.mouseStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this)},start:function(){},mouseStart:function(t){if(0==this.node.opacity)this.reNewAll(),this.node.opacity=255,cc.game.canvas.style.cursor="";else{this.reNewAll();var e=t.target||t.currentTarget;"seasoning_paprika"==e.name?cc.game.canvas.style.cursor="url('/res/import/09/09970fcf-9605-4983-a799-e0df3ce2cb2a.png'),auto":"seasoning_CuminPowder"==e.name?cc.game.canvas.style.cursor="url('/res/import/07/075e9abc-a512-4e7b-8bea-bb93b30f5557.png'),auto":"seasoning_oli"==e.name&&(cc.game.canvas.style.cursor="url('/res/import/32/3299655d-108c-4ab3-8e8a-dedf36a369c5.png'),auto"),this.isSelect=!0,console.log(this.node),this.node.opacity=0}},mouseEnd:function(){},reNewAll:function(){this.paprika.opacity=255,this.cuminPowder.opacity=255,this.oil.opacity=255,this.paprika.getComponent("all").isSelect=!1,this.cuminPowder.getComponent("all").isSelect=!1,this.oil.getComponent("all").isSelect=!1}}),cc._RF.pop()},{}],characters:[function(t,e,n){"use strict";cc._RF.push(e,"c1f83j3Ty1PKaVjyQ1rgjft","characters"),e.exports={data:{character:[{name:"Abel",type:"kind",appearance:"\u7565\u663e\u9893\u5e9f\u7684\u9ec4\u5934\u53d1\u7537\u4eba"},{name:"catGirl",type:"kind",appearance:"\u62b1\u7740\u732b\u7684\u5c0f\u5973\u5b69"},{name:"candy",type:"kind",appearance:"\u7a7f\u7740\u6b63\u5f0f\u7684\u5973\u751f"},{name:"littleAngal",type:"kind",appearance:"\u53ef\u7231\u7684\u84dd\u88d9\u5b50\u5973\u5b69"},{name:"sugar",type:"kind",appearance:"\u84dd\u88d9\u5b50\u5927\u5973\u5b69"}],show:function(t){for(var e=[],n=[],a=0;a<t.length;a++){"{}"!=JSON.stringify(t[a])&&e.push(t[a].guest.name)}for(var o=this.character.length,i=0;i<o;i++)-1==e.indexOf(this.character[i].name)&&n.push(this.character[i]);return n[Math.floor(Math.random()*n.length)]},findByName:function(t){for(var e=0;e<this.character.length;e++)if(this.character[e].name==t)return this.character[e];return console.err("can't find"+t),!1}}},cc._RF.pop()},{}],character:[function(t,e,n){"use strict";cc._RF.push(e,"8bf09OITupEjphMjvBOU2cf","character");var a=t("data/characters"),o=t("data/menu"),i=t("data/dialog"),s=t("common");cc.Class({extends:cc.Component,properties:{position:[],timerShow:null,timerLeave:null,dishes:{default:null,type:cc.Node},order:{default:null,type:cc.Node},dialogBtn:{default:null,type:cc.Node},characters:{default:null,type:cc.Node},money:{default:null,type:cc.Label}},onLoad:function(){s.data.isStopGuestTimer=!0;for(var t=this.dishes.children,e=0;e<t.length;e++)this.position.push(t[e].x);if(null==s.data.guest){s.data.guestsNum=1;this.scheduleOnce(function(){this.showGuest()},2)}else{for(var n=s.data.guest.children;0!=n.length;){var a=n[0];a.childrenCount>0&&"talk"==a.children[0].name&&a.on(cc.Node.EventType.TOUCH_START,this.guestTalk,this),a.parent=this.node}var o=s.data.guestsNum-this.node.childrenCount;if(o>0)for(var i=0;i<o;i++)this.showGuest();this.leave(),this.updateMood()}},start:function(){},onDestroy:function(){clearInterval(this.timerShow),clearInterval(this.timerLeave),s.data.isStopGuestTimer=!1},changeMood:function(t,e){e>0&&e<=30&&"mood_2"!=t.name?cc.loader.loadRes("mood/2",cc.SpriteFrame,function(e,n){t.getComponent(cc.Sprite).spriteFrame=n}):e>30&&e<=60&&"mood_1"!=t.name&&cc.loader.loadRes("mood/1",cc.SpriteFrame,function(e,n){t.getComponent(cc.Sprite).spriteFrame=n})},showGuest:function(){var t=this,e=(a.data.character,a.data.show(s.data.guests)),n=s.data.getGuestPosition(e);if(!1!==n){var o="character/"+e.name;cc.loader.loadRes(o,cc.SpriteFrame,function(a,o){var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=o,i.name=e.name,i.scaleX=.4,i.scaleY=.9,i.parent=t.node,i.x=t.position[n],i.anchorY=0,cc.loader.loadRes("talk",cc.SpriteFrame,function(e,n){var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=n,a.name="talk",a.scaleX=2,a.scaleY=2,a.anchorY=.5,i.addChild(a),a.x=150,a.y=250,i.on(cc.Node.EventType.TOUCH_START,t.guestTalk,t)}),cc.loader.loadRes("mood/0",cc.SpriteFrame,function(t,e){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=e,n.name="mood_0",n.scaleX=2,n.scaleY=2,n.anchorY=.5,i.addChild(n),n.y=i.height+70})})}},guestTalk:function(t){var e=t.target,n=e.name,r=a.data.findByName(n),c=o.data.getFood(),d=i.data.getGreeting(r.type),h=i.data.getNumber(r.type),l="";l+=d[0],l+=c.chinese,d.length>1&&(l+=d[1]),l+=h[1],this.dialogBtn.getComponent("dialogBtn").mouseStart(),this.order.getComponent(cc.Label).string=l,this.order.parent.opacity=255,this.dialogBtn.getComponent(cc.Button).interactable=!0;var u=s.data.findGuestByName(n);s.data.guests[u].food=c,s.data.guests[u].number=h[0],s.data.saveDialog(r.appearance,l);for(var p=0;p<e.childrenCount;p++)"talk"==e.children[p].name&&e.children[p].destroy();e.off(cc.Node.EventType.TOUCH_START,this.guestTalk,this)},guestEvaluation:function(t){var e=i.data.getEvaluation(t.guest.type,t.evaluation);this.order.getComponent(cc.Label).string=e,this.order.parent.opacity=255,this.dialogBtn.getComponent(cc.Button).interactable=!0,this.dialogBtn.getComponent("dialogBtn").evaluationGuest=t},findLeaveGuest:function(){for(var t=0;t<s.data.guests.length;t++){if("{}"!==JSON.stringify(s.data.guests[t])){for(var e,n=0;n<this.node.childrenCount;n++)this.node.children[n].name==s.data.guests[t].guest.name&&(e=this.node.children[n]);var a=s.data.guests[t].mood;if(a<=0&&e)s.data.leaveGuest.push(s.data.guests[t]),this.leave();else if(e){for(var o,i=0;i<e.childrenCount;i++)"talk"!=e.children[i].name&&(o=e.children[i]);this.changeMood(o,a),s.data.guests[t].mood-=5}}}},leave:function(){for(console.log("leave"),console.log(s.data.leaveGuest);0!=s.data.leaveGuest.length;){for(var t=s.data.leaveGuest[0],e=this.node.children,n=function(n){e[n].name==t.guest.name&&(o=cc.moveBy(.5,0,-300).easing(cc.easeCubicActionOut()),e[n].runAction(o),i=setTimeout(function(){e[n].destroy(),clearTimeout(i)},500),s.data.guestsNum--,r=s.data.leaveGuest.splice(0,1),console.log(r))},a=0;a<e.length;a++){var o,i,r;n(a)}var c=s.data.findGuestByName(t.guest.name);if(console.log(c),!1===c)console.log("error: can't find leave guest named"+t.guest.name);else{for(var d=0;d<s.data.dialogs.length;d++)s.data.dialogs[d].appearance==s.data.guests[c].guest.appearance&&s.data.dialogs.splice(d,1);for(var h=0;h<this.dishes.children[c].childrenCount;h++)this.dishes.children[c].children[h].destroy();var l=s.data.money,u=parseFloat(s.data.guests[c].money)+l,p=this,g=setInterval(function(){l+1<u?(l+=1,p.money.string=l.toFixed(2)+""):l+1>u&&l<u?(l+=.1,p.money.string=l.toFixed(2)+""):(clearInterval(g),s.data.money=parseFloat(u),p.money.string=parseFloat(u).toFixed(2)+"")},100);s.data.guests[c]={}}}},updateMood:function(){for(var t=s.data.guests,e=0;e<t.length;e++)if("{}"!==JSON.stringify(t[e]))for(var n=t[e].mood,a=0;a<this.node.childrenCount;a++){var o=this.node.children[a];if(o.name==t[e].guest.name)for(var i=0;i<o.childrenCount;i++)"talk"!=o.children[i].name&&this.changeMood(o.children[i],n)}}}),cc._RF.pop()},{common:"common","data/characters":void 0,"data/dialog":void 0,"data/menu":void 0}],common:[function(t,e,n){"use strict";cc._RF.push(e,"61a47BHB31C24nj582GHyVC","common"),e.exports={data:{totalTimeForDay:600,timeForDay:0,money:10,strand:[],strands:[],strandsInGrill:[],presentSize:0,maxSize:6,foods:{sausage:6,potato:2},maxBasketSize:3,basket:null,foodPlace:null,presentStrand:null,guest:null,timer:null,timeShow:0,guests:[{},{},{},{}],guestsNum:0,leaveGuest:[],isStopGuestTimer:!1,dialogs:[],settings:{timeForGame:10,timeForGuest:20},clearTime:function(){clearInterval(this.timer)},changeAllInCommon:function(){this.timeForDay+=5,this.timeShow+=5;for(var t=0;t<this.strandsInGrill.length;t++)"back"==this.strandsInGrill[t].selectedFace?this.strandsInGrill[t].back+=5:this.strandsInGrill[t].front+=5;for(var e=0;e<this.guests.length;e++){"{}"!==JSON.stringify(this.guests[e])&&(this.guests[e].mood<=0?(this.leaveGuest.push(this.guests[e]),console.log("xxxxxxxxxxxxxxxxxxx"),console.log(this.leaveGuest)):this.guests[e].mood-=5)}},getGuestPosition:function(t){for(var e=[],n=0;n<this.guests.length;n++){"{}"==JSON.stringify(this.guests[n])&&e.push(n)}if(0!==e.length){var a=Math.floor(Math.random()*e.length);return this.guests[e[a]].id=e[a],this.guests[e[a]].guest=t,this.guests[e[a]].mood=150,this.guests[e[a]].money=0,this.guests[e[a]].evaluation="tasteGood",e[a]}return!1},findGuestByName:function(t){console.log(this.guests);for(var e=0;e<this.guests.length;e++)if("{}"!=JSON.stringify(this.guests[e])&&this.guests[e].guest.name==t)return console.log(this.guests[e]),e;return!1},saveDialog:function(t,e){this.dialogs.push({appearance:t,content:e})}}},cc._RF.pop()},{}],cuttingBoard:[function(t,e,n){"use strict";cc._RF.push(e,"e1d3fVbP/xF7pPFC13Na7Zc","cuttingBoard"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],dialogBtn:[function(t,e,n){"use strict";cc._RF.push(e,"6a4a3wSFAlNL5aQ5l9dOFKC","dialogBtn");var a=t("../common");cc.Class({extends:cc.Component,properties:{dialog:{default:null,type:cc.Node},characters:{default:null,type:cc.Node},evaluationGuest:null},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.mouseStart,this)},mouseStart:function(){null!=this.evaluationGuest&&(a.data.leaveGuest.push(this.evaluationGuest),this.characters.getComponent("character").leave(),this.evaluationGuest=null),this.dialog.opacity=0,this.node.getComponent(cc.Button).interactable=!1}}),cc._RF.pop()},{"../common":void 0}],dialog:[function(t,e,n){"use strict";cc._RF.push(e,"95e4eDA8l5PhIjuzD7KNNCv","dialog"),e.exports={data:{kind:{greeting:[["\u4eca\u5929\u6211\u60f3\u6765\u70b9","\u3002"],["\u597d\u4e45\u6ca1\u5403\u8fc7","\u5566\u3002"],["\u9ebb\u70e6\u7ed9\u6211\u6765\u70b9","\u3002"],["\u5929\u6c14\u597d\u80c3\u53e3\u5c31\u597d\uff0c\u6211\u60f3\u8981\u5403","\u3002"],["\u597d\u4e45\u4e0d\u89c1\u4e86\u5462,\u771f\u6000\u5ff5\u4f60\u5bb6\u7684","!"],["\u53ef\u4ee5\u7ed9\u6211\u6765\u70b9","\u5417?"]],number:[[1,""],[1,"\u4e00\u4e32\u5c31\u53ef\u4ee5\u3002"],[2,"\u9ebb\u70e6\u6765\u4e24\u4e32\u3002"],[3,"\u6765\u4e09\u4e32\u5427\uff0c\u5feb\u8981\u997f\u6b7b\u4e86\u3002"]],tasteGood:["\u786e\u8ba4\u8fc7\u773c\u795e\uff0c\u6211\u662f\u5403\u5b83\u7684\u4eba","\u597d\u5403\u597d\u5403","\u6211\u5df2\u7ecf\u8feb\u4e0d\u53ca\u5f85\u60f3\u8981\u518d\u6765\u4e00\u4efd\u4e86"],falseFood:["\u8fd8\u884c\u5427\uff0c\u52c9\u5f3a\u80fd\u5403","\u8fd9\u597d\u50cf\u4e0d\u662f\u6211\u70b9\u7684","\u6211\u7684\u5929\uff0c\u4f60\u5c45\u7136\u77e5\u9053\u6211\u66f4\u559c\u6b22\u5403\u8fd9\u4e2a","\u8fd9\u597d\u50cf\u6bd4\u6211\u70b9\u7684\u66f4\u597d\u5403\u5462","\u55ef..\u867d\u7136\u4e0d\u662f\u6211\u70b9\u7684..\u4f46\u662f\u597d\u50cf\u8d5a\u5230\u4e86\u5462"],uncooked:["\u597d\u50cf\u6709\u70b9\u6ca1\u719f\u5462","\u725b\u6392\u4e03\u5206\u719f\u66f4\u597d\u5403\u5462\uff0c\u8fd9\u4e2a\u4e5f\u4e00\u6837\u5462","\u867d\u7136\u6709\u70b9\u6ca1\u719f\uff0c\u4f46\u8001\u677f\u7684\u81ea\u4fe1\u6070\u6070\u8bf4\u660e\u4e86\u98df\u7269\u5f88\u65b0\u9c9c","\u600e\u4e48\u70e4\u4e86\u540e\u8fd8\u662f\u8f6f\u8db4\u8db4\u7684"],thanCooked:["\u4e0b\u6b21\u53ef\u4ee5\u4e0d\u8981\u70e4\u7cca\u5417","\u6709\u79cd\u7126\u7126\u7684\u611f\u89c9","\u6ca1\u6709\u4ee5\u524d\u7684\u597d\u5403\u4e86\u5462","\u6211\u611f\u89c9\u53ef\u4ee5\u62ff\u7740\u5b83\u5f53\u6b66\u5668"]},unkind:{greeting:[["\u7ed9\u6211\u70e4\u70b9",",\u4e0d\u8981\u518d\u70e4\u7cca\u4e86!"],["\u6765\u70b9\u597d\u5403\u7684","\u5427\u3002"],["\u6211\u60f3\u5403",",\u901f\u5ea6\u5feb\u4e00\u70b9OK?"]],number:[[1,""],[1,"\u5c31\u8981\u4e00\u4e32\u3002"],[1,"\u53ea\u8981\u4e00\u4e32\u3002"],[2,"\u6765\u4e24\u4e32\u597d\u4e86\u3002"],[2,"\u4e24\u4e32\u3002"],[3,"\u4e09\u4e32,\u591a\u5403\u624d\u80fd\u53d8\u5065\u5eb7~"]],tasteGood:["\u597d\u5403\u5230\u6d41\u6cb9","\u8fd9\u662f\u6211\u5403\u8fc7\u7684\u6700\u597d\u5403\u7684\u70e7\u70e4\u4e86"],falseFood:["\u4f60\u662f\u8033\u80cc\u5417","\u8fd9\u662f\u6211\u89c1\u8fc7\u6700\u5dee\u7684\u670d\u52a1\u4e86","\u54a6\uff0c\u8fd9\u662f\u5565\uff1f\u597d\u96be\u5403\u554a","\u4f60\u89c9\u5f97\u8fd9\u79cd\u732a\u98df\u6211\u4f1a\u5403\u5417\uff1f","\u6211\u4ece\u6765\u4e0d\u5403\u8fd9\u4e2a"],uncooked:["\u4e00\u80a1\u5b50\u8165\u5473","\u8001\u677f\u4f60\u600e\u4e48\u80fd\u7ed9\u6211\u5403\u6ca1\u719f\u7684\u98df\u7269\u5462\uff0c\u62c9\u809a\u5b50\u4e86\u4f60\u8d1f\u8d23\u5417","\u600e\u4e48\u8fd8\u662f\u751f\u7684\uff0c\u6211\u4e5f\u662f\u9189\u4e86","\u8fd9\u53ef\u80fd\u4e0d\u662f\u70e4\u7684\uff0c\u662f\u6c34\u716e\u7684"],thanCooked:["\u4ec0\u4e48\u5440\uff0c\u786c\u90a6\u90a6\u7684","\u90fd\u70e4\u7126\u4e86\uff0c\u8fd8\u600e\u4e48\u5403\u5440","\u5403\u8d77\u6765\u50cf\u6728\u5934\u4e00\u6837","\u6211\u7684\u7259\u9f7f\u90fd\u8981\u88ab\u78d5\u6389\u4e86"]},getGreeting:function(t){if("kind"==t){var e=Math.floor(Math.random()*this.kind.greeting.length);return this.kind.greeting[e]}e=Math.floor(Math.random()*this.unkind.greeting.length);return this.unkind.greeting[e]},getNumber:function(t){if("kind"==t){var e=Math.floor(Math.random()*this.kind.number.length);return this.kind.number[e]}e=Math.floor(Math.random()*this.unkind.number.length);return this.unkind.number[e]},getEvaluation:function(t,e){if("kind"==t){if("tasteGood"==e){var n=Math.floor(Math.random()*this.kind.tasteGood.length);return this.kind.tasteGood[n]}if("falseFood"==e){n=Math.floor(Math.random()*this.kind.falseFood.length);return this.kind.falseFood[n]}if("uncooked"==e){n=Math.floor(Math.random()*this.kind.uncooked.length);return this.kind.uncooked[n]}if("thanCooked"==e){n=Math.floor(Math.random()*this.kind.thanCooked.length);return this.kind.thanCooked[n]}}else{if("tasteGood"==e){n=Math.floor(Math.random()*this.unkind.tasteGood.length);return this.unkind.tasteGood[n]}if("falseFood"==e){n=Math.floor(Math.random()*this.unkind.falseFood.length);return this.unkind.falseFood[n]}if("uncooked"==e){n=Math.floor(Math.random()*this.unkind.uncooked.length);return this.unkind.uncooked[n]}if("thanCooked"==e){n=Math.floor(Math.random()*this.unkind.thanCooked.length);return this.unkind.thanCooked[n]}}}}},cc._RF.pop()},{}],foodPlace:[function(t,e,n){"use strict";cc._RF.push(e,"82552KEusdBR6ElbSKHRh4J","foodPlace");var a=t("common");cc.Class({extends:cc.Component,properties:{grill:{default:null,type:cc.Node},paprika:{default:null,type:cc.Node},cuminPowder:{default:null,type:cc.Node},oil:{default:null,type:cc.Node},guests:{default:null,type:cc.Node},dishes:{default:null,type:cc.Node},targetOriginX:0,targetOriginY:0},onLoad:function(){for(var t=this.node.children,e=0;e<t.length;e++)t[e].on(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),t[e].on(cc.Node.EventType.TOUCH_START,this.mouseStart,this),t[e].on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),t[e].on(cc.Node.EventType.TOUCH_CANCEL,this.mouseEnd,this);a.data.timer},mouseStart:function(t){var e=t.target;this.targetOriginX=e.x,this.targetOriginY=e.y,e.zIndex++;this.paprika.getComponent("all"),this.cuminPowder.getComponent("all"),this.oil.getComponent("all")},mouseMove:function(t){var e=t.target,n=this.paprika.getComponent("all"),a=this.cuminPowder.getComponent("all"),o=this.oil.getComponent("all");if(!(n.isSelect||a.isSelect||o.isSelect)){var i=t.touch.getDelta();e.x+=i.x,e.y+=i.y}},mouseEnd:function(t){var e=t.target,n=this.paprika.getComponent("all"),o=this.cuminPowder.getComponent("all"),i=this.oil.getComponent("all");if(n.isSelect||o.isSelect||i.isSelect){d=a.data.strandsInGrill;for(var s=0;s<d.length;s++)if(d[s].name==e.name){var r="";n.isSelect?(d[s].seasoning.push("paprika"),r="paprika"):o.isSelect?(d[s].seasoning.push("cuminPowder"),r="cuminPowder"):i.isSelect&&(d[s].seasoning.push("oil"),r="oil"),this.addSeasoning(e,r)}}else if(e.x<this.targetOriginX+5&&e.x>this.targetOriginX-5&&e.y<this.targetOriginY+5&&e.y>this.targetOriginY-5){for(var c=0,d=a.data.strandsInGrill,h=0;h<d.length;h++)d[h].name==e.name&&("back"==a.data.strandsInGrill[h].selectedFace?(a.data.strandsInGrill[h].selectedFace="front",c=a.data.strandsInGrill[h].back):(a.data.strandsInGrill[h].selectedFace="back",c=a.data.strandsInGrill[h].front));var l=e.scaleX,u=e.scaleY,p=cc.sequence(cc.spawn(cc.moveBy(.05,5,5),cc.scaleTo(.1,.3,u)),cc.spawn(cc.moveBy(.05,-5,-5),cc.scaleTo(.1,l,u)));e.runAction(p);for(var g=e.children,m=1;m<g.length;m++){var f=g[m].name;c<10||(c>=10&&c<20?f+="_1":c>=20&&c<40?f+="_2":c>=40&&(f+="_3")),this.changeFoodRipe(f,g[m])}}else{var v=-this.grill.width/2+50,y=this.grill.width/2-50,S=this.grill.height/2,C=-this.grill.height/2;if(e.x>=v&&e.x<=y&&e.y<=S&&e.y>=C){var T=this.node.children,N=e.x-e.width/2,k=e.x+e.width/2;console.log(k-N),console.log(T);for(var x=0;x<T.length;x++){var O=T[x].x-T[x].width/2,E=T[x].x+T[x].width/2;if(console.log(E-O),!(k<O||N>E)&&T[x]!=e)return console.log(k,O),console.log(T[x]),e.x=this.targetOriginX,e.y=this.targetOriginY,void e.zIndex--}return void(e.y=0)}for(var F=[],w=0;w<this.guests.childrenCount;w++){var _=this.guests.children[w],M=this.guests.x+_.height,b=this.guests.x,G=_.x-_.width/2,R=_.x+_.width/2;if(F.push({top:M,bottom:b,left:G,right:R}),e.x>=G&&e.x<=R&&e.y<=M&&e.y>=b){var B=a.data.guests[a.data.findGuestByName(_.name)];if(B.food){for(var A=this.dishes.children[B.id],H=setTimeout(function(){e.parent=A,e.zIndex=A.zIndex+1;var t=cc.spawn(cc.scaleTo(.2,.2,.2),cc.moveTo(.2,0,0)).easing(cc.easeCubicActionOut());e.runAction(t),clearTimeout(H)},0),P=a.data.strandsInGrill,U=100,L=!1,I="",D=1;D<e.childrenCount;D++)I+=e.children[D].name;if(B.food.name==I){L=!0;for(var Y=0;Y<P.length;Y++)P[Y].name==e.name&&(P[Y].front<20||P[Y].back<20?(U-=20,B.evaluation="uncooked"):(P[Y].front>40||P[Y].back>40)&&(U-=20,B.evaluation="thanCooked"))}if(0==L&&(U-=40,B.evaluation="falseFood"),B.money=B.money+.01*U*B.food.price,B.number--,e.off(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),e.off(cc.Node.EventType.TOUCH_START,this.mouseStart,this),e.off(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),e.off(cc.Node.EventType.TOUCH_CANCEL,this.mouseEnd,this),0==B.number)this.guests.getComponent("character").guestEvaluation(B);return}console.log("\u8fd9\u4f4d\u987e\u5ba2\u8fd8\u6ca1\u70b9\u5355\u5462")}}e.x=this.targetOriginX,e.y=this.targetOriginY,e.zIndex--}},changeFoodRipe:function(t,e){cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.getComponent(cc.Sprite).spriteFrame=n})},addSeasoning:function(t,e){var n="";if(""==e)console.error("no seasoning");else if("paprika"==e||"cuminPowder"==e){switch(e){case"paprika":n="bf0000";break;case"cuminPowder":n="#bf7200"}for(var a=1;a<t.childrenCount;a++){var o=t.children[a],i=new cc.Node;i.parent=o;var s=i.addComponent(cc.Graphics);s.fillColor=(new cc.Color).fromHEX(n);for(var r=0;r<100;r++){var c=5-o.width/2+(o.width-5)*Math.random(),d=5-o.height/2+(o.height-5)*Math.random(),h=Math.random();s.circle(c,d,h),s.fill()}}}else"oil"==e&&cc.loader.loadRes("oil",cc.SpriteFrame,function(e,n){for(var a=0;a<t.childrenCount;a++){var o=t.children[a],i=new cc.Node;o.addChild(i),i.addComponent(cc.Sprite).spriteFrame=n,i.width=o.width,i.height=o.height;var s=cc.spawn(cc.fadeTo(2,0),cc.scaleTo(2,.2,.2)).easing(cc.easeCubicActionOut());i.runAction(s),setTimeout(function(){i.destroy()},2e3)}})}}),cc._RF.pop()},{common:"common"}],game:[function(t,e,n){"use strict";cc._RF.push(e,"5cf85QwDMhBYJw2HeJIi60h","game");var a=t("common");cc.Class({extends:cc.Component,properties:{basket:{default:null,type:cc.Node},foodPlace:{default:null,type:cc.Node},menu:{default:null,type:cc.Node},dialogMenu:{default:null,type:cc.Node},guest:{default:null,type:cc.Node},money:{default:null,type:cc.Label},sun:{default:null,type:cc.Sprite},timeChange:5e3},onLoad:function(){var t=this,e=cc.director.getScene();a.data.timer=setInterval(function(){if(a.data.changeAllInCommon(),"SenceCook"==e.name){var n=t.guest.getComponent("character");a.data.timeShow==a.data.settings.timeForGuest&&(a.data.timeShow=0,a.data.guestsNum<4&&(n.showGuest(),a.data.guestsNum++)),n.findLeaveGuest()}else a.data.timeShow==a.data.settings.timeForGuest&&(a.data.timeShow=0,a.data.guestsNum<4&&a.data.guestsNum++)},this.timeChange),this.money.string=a.data.money.toFixed(2);var n=a.data.basket;if(null!==n&&0!==n.childrenCount)for(var o=0;o<n.childrenCount;o++){cc.instantiate(n.children[o]).parent=this.basket}var i=a.data.foodPlace;if(null!==i&&0!==i.childrenCount)for(o=0;o<i.childrenCount;o++){cc.instantiate(i.children[o]).parent=this.foodPlace}cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.changeSence,this),this.menu.on(cc.Node.EventType.TOUCH_START,this.openMenu,this)},start:function(){},changeSence:function(t){var e=cc.director.getScene();if(65==t.keyCode||68==t.keyCode)if(a.data.basket=cc.instantiate(this.basket),"SenceCook"==e.name)a.data.foodPlace=cc.instantiate(this.foodPlace),a.data.guest=cc.instantiate(this.guest),cc.director.loadScene("SenceMake");else{var n=cc.find("Canvas").getChildByName("Main Camera").getChildByName("presentStrand");a.data.presentStrand=cc.instantiate(n),cc.director.loadScene("SenceCook")}},openMenu:function(t){for(var e=a.data.dialogs,n=this.dialogMenu.children[1].children[0],o="",i=0;i<e.length;i++){o+=e[i].appearance,o+=":\n";var s=e[i].content;if(s.length>18)for(var r=Math.ceil(s.length/18),c=0;c<r;c++){o+=s.slice(18*c,18*(c+1)),o+="\n"}else o+=s,o+="\n";o+="\n\n"}n.getComponent(cc.Label).string=o,this.dialogMenu.opacity=255,this.dialogMenu.children[0].on(cc.Node.EventType.TOUCH_START,this.closeMenu,this)},closeMenu:function(t){this.dialogMenu.opacity=0,this.dialogMenu.children[0].off(cc.Node.EventType.TOUCH_START,this.closeMenu,this)},showSun:function(){var t=this.totalTimeForDay/16;return"sun/"+Math.floor(a.data.timeForDay/t)},_throttle:function(t){var e=!0;return function(){var n=this,a=arguments;0!=e&&(e=!0,setTimeout(function(){t.apply(n,a)},this.timeChange))}}}),cc._RF.pop()},{common:"common"}],getFoodFromBasket:[function(t,e,n){"use strict";cc._RF.push(e,"0f82ePpCnZCcLrxuRW6FSRl","getFoodFromBasket");var a=t("common");cc.Class({extends:cc.Component,properties:{isLight:!1,grillPosition:{default:null,type:cc.Node},grill:{default:null,type:cc.Node},foodPlace:{default:null,type:cc.Node},smoke:{default:null,type:cc.Node},foodCookingParticle:{default:null,type:cc.Prefab},targetOriginX:0,targetOriginY:0,targetBeforeYLength:0,iSelect:-1},onLoad:function(){for(var t=this.node.children,e=0;e<t.length;e++)t[e].on(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),t[e].on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),t[e].on(cc.Node.EventType.TOUCH_CANCEL,this.mouseEnd,this)},start:function(){},mouseMove:function(t){var e=t.target;if(!this.isLight){this.targetOriginX=e.x,this.targetOriginY=e.y,this.isLight=!0;var n=cc.spawn(cc.scaleTo(.2,.8,.8),cc.rotateBy(.2,-90)).easing(cc.easeCubicActionOut());e.runAction(n);for(var a=this.node.children,o="",i=1;i<e.childrenCount;i++)o+=e.children[i].name;for(var s=0;s<a.length;s++){a[s]==e&&(this.iSelect=s);for(var r=a[s].children,c="",d=1;d<r.length;d++)c+=r[d].name;if(a[s].y>this.targetOriginY&&c==o&&s!==this.iSelect){var h=cc.moveBy(.2,0,-5);a[s].runAction(h),this.targetBeforeYLength++}}}var l=t.touch.getDelta();e.x+=l.x,e.y+=l.y},mouseEnd:function(t){var e=t.target;if(this.isLight){this.isLight=!1;if(e.x>=-744&&e.x<=-100&&e.y<=100&&e.y>=-200){for(var n=this.node.x-this.grillPosition.x,a=this.foodPlace.children,o=e.x-e.width/2,i=e.x+e.width/2,s=0;s<a.length;s++){var r=a[s].x-a[s].width/2-n,c=a[s].x+a[s].width/2-n;if(!(i<r||o>c))return void this.doRecover(e)}e.parent=this.foodPlace,e.y=0,e.x=e.x+n;for(var d="",h=0;h<10;h++)d+=Math.floor(10*Math.random());e.name="strand"+d,e.off(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),e.off(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),e.off(cc.Node.EventType.TOUCH_CANCEL,this.mouseEnd,this),this.targetBeforeYLength=0,this.changeStrands(e),this.onGrill();var l=this.foodPlace.getComponent("foodPlace");e.on(cc.Node.EventType.TOUCH_MOVE,l.mouseMove,l),e.on(cc.Node.EventType.TOUCH_START,l.mouseStart,l),e.on(cc.Node.EventType.TOUCH_END,l.mouseEnd,l),e.on(cc.Node.EventType.TOUCH_CANCEL,l.mouseEnd,l)}else this.doRecover(e)}},doRecover:function(t){var e=-1*t.x+this.targetOriginX,n=-1*t.y+this.targetOriginY+5*this.targetBeforeYLength,a=cc.spawn(cc.scaleTo(.2,.4,.4),cc.rotateBy(.2,90),cc.moveBy(.2,e,n)).easing(cc.easeCubicActionOut());t.runAction(a),this.changeFoodOrder(t),this.targetBeforeYLength=0},changeFoodOrder:function(t){for(var e=this.node.children,n=e[this.iSelect],a=this.iSelect;a<e.length;a++)e[a]=e[a+1];e[e.length-1]=n},changeStrands:function(t){for(var e=a.data.strands,n="",o=1;o<t.childrenCount;o++)n+=t.children[o].name;for(var i=0;i<e.length;i++){for(var s=e[i].type,r="",c=0;c<s.length;c++)r+=s[c];r==n&&(e[i].length--,0==e[i].length&&e.splice(i,1))}var d={name:t.name,typeName:n,front:0,back:0,seasoning:[],selectedFace:"back"};a.data.strandsInGrill.push(d),a.data.strands=e},onGrill:function(){this.smoke.getComponent(cc.Animation).play()}}),cc._RF.pop()},{common:"common"}],menu:[function(t,e,n){"use strict";cc._RF.push(e,"44c0d5LDN5NsYl7vBBIOxWY","menu"),e.exports={data:{types:[{name:"sausage",chinese:"\u9999\u80a0",price:2},{name:"potatopotatopotato",chinese:"\u571f\u8c46\u4e32",price:1}],getFood:function(){var t=Math.floor(Math.random()*this.types.length);return console.log(this.types[t]),this.types[t]}}},cc._RF.pop()},{}],presentStrand:[function(t,e,n){"use strict";cc._RF.push(e,"df8ef92kotNxYzDJfMGmQ6U","presentStrand");var a=t("common");cc.Class({extends:cc.Component,properties:{basket:{default:null,type:cc.Node},trash:{default:null,type:cc.Node},presentStrand:{default:null,type:cc.Node},x:-3,y:-117,position:0,isTrashOpen:!1},onLoad:function(){var t=a.data.presentStrand;if(null!=t)t.parent=this.node,this.presentStrand=t;else{var e=this.createPresentStrand();this.initStick(e),this.presentStrand=e}this.presentStrand.on(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),this.presentStrand.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this)},start:function(){},mouseMove:function(t){if(0!==a.data.presentSize){var e=t.touch.getDelta();this.presentStrand.x+=e.x,this.presentStrand.y+=e.y;var n=this.trash.x-this.trash.width/2,o=this.trash.x+this.trash.width/2,i=this.trash.y+this.trash.height/2,s=this.trash.y-this.trash.height/2,r=this.trash.getComponent(cc.Animation);this.presentStrand.x>=n&&this.presentStrand.x<o&&this.presentStrand.y>=s&&this.presentStrand.y<i?this.isTrashOpen||(this.isTrashOpen=!0,r.play("trashOpen")):this.isTrashOpen&&(this.isTrashOpen=!1,r.play("trashClose"))}},mouseEnd:function(t){var e=this.basket.x-this.basket.width/2,n=this.basket.x+this.basket.width/2,o=this.basket.y+this.basket.height/2,i=this.basket.y-this.basket.height/2,s=this.trash.x-this.trash.width/2,r=this.trash.x+this.trash.width/2,c=this.trash.y+this.trash.height/2,d=this.trash.y-this.trash.height/2,h=a.data;if(this.presentStrand.x>=e&&this.presentStrand.x<n&&this.presentStrand.y>=i&&this.presentStrand.y<o){var l={};l.type=h.strand;var u=this.getNumber(h.strand),p=this.basket.height-30;if(1==u.length){if(h.strands.length==h.maxBasketSize)return this.presentStrand.x=this.x,void(this.presentStrand.y=this.y);l.length=u.length,h.strands.push(l);var g=p/2-p/h.maxBasketSize*(h.strands.length-1)-20}else{h.strands[u.index].length++;g=p/2-p/h.maxBasketSize*u.index+5*(u.length-1)-20}h.strand=[],h.presentSize=0;var m=cc.spawn(cc.scaleTo(.2,.4,.4),cc.rotateBy(.2,90),cc.moveBy(.2,-20,g)).easing(cc.easeCubicActionOut());this.presentStrand.runAction(m),this.presentStrand.parent=this.basket,this.presentStrand.x=0,this.presentStrand.y=0,this.presentStrand.off(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),this.presentStrand.off(cc.Node.EventType.TOUCH_END,this.mouseEnd,this);var f=this.createPresentStrand();this.initStick(f),this.presentStrand=f,this.presentStrand.on(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),this.presentStrand.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this)}else if(this.presentStrand.x>=s&&this.presentStrand.x<r&&this.presentStrand.y>=d&&this.presentStrand.y<c){m=cc.spawn(cc.scaleTo(.2,0,0),cc.moveBy(.2,0,0)).easing(cc.easeCubicActionOut());var v=this.trash.getComponent(cc.Animation);this.presentStrand.runAction(m),this.isTrashOpen=!1,v.play("trashClose"),this.presentStrand.off(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),this.presentStrand.off(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),setTimeout(function(){this.presentStrand.destroy();var t=this.createPresentStrand();this.initStick(t),this.presentStrand=t,this.presentStrand.on(cc.Node.EventType.TOUCH_MOVE,this.mouseMove,this),this.presentStrand.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),h.strand=[],h.presentSize=0}.bind(this),200)}else this.presentStrand.x=this.x,this.presentStrand.y=this.y},initStick:function(t){cc.loader.loadRes("stick",cc.SpriteFrame,function(e,n){var a=new cc.Node;a.parent=t,a.addComponent(cc.Sprite).spriteFrame=n})},createPresentStrand:function(){var t=new cc.Node;return t.parent=this.node,t.name="presentStrand",t.x=this.x,t.y=this.y,t.height=200,t.width=20,t},getNumber:function(t){var e=1,n=-1;return a.data.strands.forEach(function(a,o){a.type.toString()==t.toString()&&(e+=a.length,n=o)}),{length:e,index:n}}}),cc._RF.pop()},{common:"common"}]},{},["addFood","character","common","cuttingBoard","characters","dialog","menu","dialogBtn","foodPlace","game","getFoodFromBasket","presentStrand","all"]);